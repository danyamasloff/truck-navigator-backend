# ????? ????????? ??????????
spring.application.name=truck-navigator-backend
server.port=8080

# ????????? ???? ??????
spring.datasource.url=jdbc:postgresql://localhost:5433/truckdb
spring.datasource.username=postgres
spring.datasource.password=${POSTGRES_PASSWORD:TruckNavDB_S3cur3!}
spring.datasource.driver-class-name=org.postgresql.Driver

# ????????? JPA/Hibernate
spring.jpa.database-platform=org.hibernate.spatial.dialect.postgis.PostgisPG95Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false

# ????????? JSON
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=Europe/Moscow
spring.jackson.serialization.write-dates-as-timestamps=false

# ????????? ???????????
logging.level.ru.maslov=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ????????? API-??????????
# GraphHopper API - ??????? ?????? ?????????????
graphhopper.api.url=https://graphhopper.com/api/1
graphhopper.api.key=${GRAPHHOPPER_API_KEY:d4c33e81-6eeb-4af4-a7d3-30760756bab6}

# OpenWeatherMap API
weather.api.url=https://api.openweathermap.org/data/2.5
weather.api.key=${OPENWEATHER_API_KEY:93296d4b0fc0ba3000fd7c5e9eef3290}

# FuelPrice API - цены на топливо (заглушка для разработки)
fuel.price.api.url=${FUEL_PRICE_API_URL:https://api.fuelprice.example.ru}
fuel.price.api.key=${FUEL_PRICE_API_KEY:test_fuel_price_key}

# ????????? ???????????
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=60m

# Дополнительные настройки кэша для разных типов данных
spring.cache.cache-names=geocodeCache,reverseGeocodeCache,searchCache,poisCache,currentWeatherCache,weatherForecastCache,weatherForecastTimeCache,fuelPricesCache,routeFuelPricesCache

# JWT Configuration
app.jwt.secret=${JWT_SECRET:TruckNavigatorSecretKey567890123456789012345678901234567890}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}
app.jwt.refresh-expiration-ms=${JWT_REFRESH_EXPIRATION_MS:604800000}

# OpenAPI Configuration
app.openapi.dev-url=http://localhost:8080
app.openapi.prod-url=https://api.truck-navigator.ru

# ????????? ???????????? API
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method

# ????????? ??? ?????? ??????? ????????
# ????-?????????
risk.analysis.weather.weight=0.4
risk.analysis.road.quality.weight=0.3
risk.analysis.accident.statistics.weight=0.3

# ?????? ??????????????
profitability.fuel.cost.weight=0.5
profitability.toll.roads.weight=0.2
profitability.vehicle.wear.weight=0.2
profitability.driver.time.weight=0.1

# ????????? ?????????? ??? ?????????
driver.rest.short.break.minutes=15
driver.rest.long.break.minutes=45
driver.work.max.continuous.minutes=270
driver.work.max.daily.minutes=540

# ????????? ???????? ?????? ???? ????????? (? ??????)
driver.rest.search.radius.short=5000
driver.rest.search.radius.long=10000
driver.rest.search.radius.daily=20000

# ???????????? ?????????? ????????????? ???? ??? ?????? ?????????
driver.rest.max.locations=5

# ????????? ??? ???????????
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ????????? ??????? dev
spring.profiles.active=dev

